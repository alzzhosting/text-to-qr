<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Challenge - Game Teka-Teki Otak</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header {
            margin-bottom: 20px;
        }

        .game-title {
            color: #ff6b6b;
            font-size: 2.5rem;
            text-shadow: 2px 2px 0 #ffd166;
            margin-bottom: 10px;
        }

        .level-info {
            background-color: #4ecdc4;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 4px 0 #1a936f;
        }

        .game-content {
            background-color: #f7f9fc;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .question {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: #333;
        }

        .answer-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 15px;
            text-align: center;
            outline: none;
            transition: all 0.3s;
        }

        .answer-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn {
            flex: 1;
            padding: 12px 0;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn {
            background-color: #4ecdc4;
            color: white;
            box-shadow: 0 4px 0 #1a936f;
        }

        .submit-btn:hover {
            background-color: #3db8af;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #1a936f;
        }

        .skip-btn {
            background-color: #ffd166;
            color: #333;
            box-shadow: 0 4px 0 #ff9e00;
        }

        .skip-btn:hover {
            background-color: #ffc145;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #ff9e00;
        }

        .hint-btn {
            background-color: #ff6b6b;
            color: white;
            box-shadow: 0 4px 0 #c44d4d;
        }

        .hint-btn:hover {
            background-color: #ff5252;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #c44d4d;
        }

        .reset-btn {
            background-color: #9b59b6;
            color: white;
            box-shadow: 0 4px 0 #8e44ad;
        }

        .reset-btn:hover {
            background-color: #8e44ad;
            transform: translateY(2px);
            box-shadow: 0 2px 0 #8e44ad;
        }

        .music-control {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .music-control i {
            font-size: 1.2rem;
            color: #6a11cb;
        }

        .save-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .save-indicator i {
            font-size: 1.2rem;
            color: #27ae60;
        }

        .save-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2ecc71;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .save-notification.show {
            opacity: 1;
        }

        .ad-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 100;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .ad-content {
            background-color: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .ad-image {
            width: 100%;
            height: 200px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .ad-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .ad-timer {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
            margin: 20px 0;
        }

        .ad-message {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .hint-container {
            display: none;
            margin-top: 15px;
            padding: 10px;
            background-color: #ffeaa7;
            border-radius: 10px;
            font-size: 1rem;
        }

        .progress-container {
            margin-top: 15px;
        }

        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #ff6b6b);
            width: 0%;
            transition: width 0.5s;
        }

        .celebration {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 100;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .celebration-content {
            text-align: center;
            background-color: white;
            color: #333;
            padding: 30px;
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
        }

        .celebration-title {
            color: #ff6b6b;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .final-message {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.7;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="game-container">
        <div class="music-control" id="musicControl">
            <i class="fas fa-volume-up"></i>
        </div>
        
        <div class="save-indicator" id="saveIndicator" title="Game tersimpan otomatis">
            <i class="fas fa-save"></i>
        </div>
        
        <div class="header">
            <h1 class="game-title">Brain Challenge</h1>
            <div class="level-info">Level <span id="level">1</span></div>
        </div>
        
        <div class="game-content">
            <div class="question" id="question">Memuat pertanyaan...</div>
            <input type="text" class="answer-input" id="answer" placeholder="Ketik jawabanmu di sini...">
            <div class="buttons">
                <button class="btn submit-btn" id="submit">Submit</button>
                <button class="btn skip-btn" id="skip">Skip Level</button>
            </div>
            <div class="buttons">
                <button class="btn hint-btn" id="hint">Bantuan</button>
                <button class="btn reset-btn" id="reset">Reset Game</button>
            </div>
            <div class="hint-container" id="hintText"></div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div>Progress: <span id="progressText">0/100</span></div>
        </div>
    </div>
    
    <div class="save-notification" id="saveNotification">
        <i class="fas fa-check-circle"></i> Game berhasil disimpan!
    </div>
    
    <div class="ad-container" id="adContainer">
        <div class="ad-content">
            <h2>Tonton Iklan untuk Skip Level</h2>
            <div class="ad-image">
                <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Iklan Game Seru">
            </div>
            <div class="ad-timer" id="adTimer">30</div>
            <p class="ad-message">Tunggu hingga iklan selesai untuk melanjutkan ke level berikutnya</p>
            <p>Iklan simulasi - dalam aplikasi nyata, ini akan menjadi iklan sungguhan</p>
        </div>
    </div>
    
    <div class="celebration" id="celebration">
        <div class="celebration-content">
            <h2 class="celebration-title">Selamat!</h2>
            <p class="final-message">Kamu telah berhasil menyelesaikan semua level Brain Challenge!</p>
            <p>Kamu benar-benar jenius!</p>
            <button class="btn submit-btn" id="playAgain">Main Lagi</button>
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="https://github.com/alzzhosting/AxeonManager/raw/refs/heads/main/mixkit-remember-me-375.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Data pertanyaan untuk setiap level
        const questions = [
            // Level 1-10 (Mudah)
            { 
                question: "Apa yang punya kepala dan ekor, tapi tidak punya tubuh?", 
                answer: "koin", 
                hint: "Digunakan untuk membayar sesuatu"
            },
            { 
                question: "Semakin banyak kamu mengambil, semakin banyak kamu tinggalkan. Apa itu?", 
                answer: "langkah", 
                hint: "Saat kamu berjalan"
            },
            { 
                question: "Aku punya kota tapi tidak ada rumah, punya hutan tapi tidak ada pohon, punya sungai tapi tidak ada air. Apa aku?", 
                answer: "peta", 
                hint: "Digunakan untuk navigasi"
            },
            { 
                question: "Apa yang naik tapi tidak pernah turun?", 
                answer: "umur", 
                hint: "Terus bertambah setiap tahun"
            },
            { 
                question: "Apa yang punya tangan tapi tidak bisa bertepuk tangan?", 
                answer: "jam", 
                hint: "Menunjukkan waktu"
            },
            { 
                question: "Aku punya mata tapi tidak bisa melihat. Apa aku?", 
                answer: "badai", 
                hint: "Terjadi di lautan"
            },
            { 
                question: "Apa yang bisa dipatahkan meski tidak dipegang?", 
                answer: "janji", 
                hint: "Sesuatu yang diucapkan"
            },
            { 
                question: "Apa yang penuh dengan lubang tapi masih bisa menampung air?", 
                answer: "spons", 
                hint: "Digunakan untuk mencuci"
            },
            { 
                question: "Apa yang punya leher tapi tidak punya kepala?", 
                answer: "botol", 
                hint: "Tempat minuman"
            },
            { 
                question: "Apa yang selalu datang tapi tidak pernah tiba?", 
                answer: "besok", 
                hint: "Hari setelah hari ini"
            },
            
            // Level 11-20 (Sedang)
            { 
                question: "Aku punya kata-kata tapi tidak bisa bicara. Apa aku?", 
                answer: "buku", 
                hint: "Berisi cerita atau informasi"
            },
            { 
                question: "Apa yang bisa berjalan tanpa kaki dan menangis tanpa mata?", 
                answer: "awan", 
                hint: "Di langit, membawa hujan"
            },
            { 
                question: "Apa yang memiliki satu mata tapi tidak bisa melihat?", 
                answer: "jarum", 
                hint: "Digunakan untuk menjahit"
            },
            { 
                question: "Apa yang bisa membuat orang hidup, tapi bukan makhluk hidup?", 
                answer: "kata-kata", 
                hint: "Dapat mempengaruhi perasaan"
            },
            { 
                question: "Semakin kering, semakin basah. Apa itu?", 
                answer: "handuk", 
                hint: "Digunakan setelah mandi"
            },
            { 
                question: "Apa yang bisa dipecahkan hanya dengan mengatakan?", 
                answer: "keheningan", 
                hint: "Kondisi tanpa suara"
            },
            { 
                question: "Apa yang punya gigi tapi tidak bisa makan?", 
                answer: "gergaji", 
                hint: "Alat untuk memotong kayu"
            },
            { 
                question: "Apa yang punya lidah tapi tidak bisa bicara?", 
                answer: "sepatu", 
                hint: "Dipakai di kaki"
            },
            { 
                question: "Apa yang punya jendela tapi bukan rumah?", 
                answer: "mobil", 
                hint: "Kendaraan bermotor"
            },
            { 
                question: "Apa yang bisa mengelilingi halaman tanpa bergerak?", 
                answer: "pagar", 
                hint: "Pembatas di sekitar rumah"
            },
            
            // Level 21-30 (Sedang-Sulit)
            { 
                question: "Apa yang bisa kamu pegang tanpa menyentuhnya?", 
                answer: "napas", 
                hint: "Keluar dari hidung dan mulut"
            },
            { 
                question: "Apa yang bisa membuat orang kaya sekaligus miskin?", 
                answer: "kebiasaan", 
                hint: "Sesuatu yang dilakukan berulang-ulang"
            },
            { 
                question: "Apa yang bisa kamu bagi tapi tetap utuh?", 
                answer: "rahasia", 
                hint: "Sesuatu yang tidak semua orang tahu"
            },
            { 
                question: "Apa yang bisa kamu tangkap tapi tidak bisa kamu lempar?", 
                answer: "pilek", 
                hint: "Penyakit ringan"
            },
            { 
                question: "Apa yang bisa berjalan di atas air tapi tenggelam di atas api?", 
                answer: "es", 
                hint: "Air yang membeku"
            },
            { 
                question: "Apa yang bisa kamu berikan kepada orang lain tapi tidak bisa menyimpannya?", 
                answer: "janji", 
                hint: "Komitmen untuk melakukan sesuatu"
            },
            { 
                question: "Apa yang bisa kamu lihat dengan mata tertutup?", 
                answer: "mimpi", 
                hint: "Terjadi saat tidur"
            },
            { 
                question: "Apa yang bisa mengisi ruangan tapi tidak memakan tempat?", 
                answer: "cahaya", 
                hint: "Membuat terang"
            },
            { 
                question: "Apa yang bisa kamu makan tapi tidak bisa kamu kunyah?", 
                answer: "sup", 
                hint: "Makanan berkuah"
            },
            { 
                question: "Apa yang bisa kamu pegang di tangan kanan tapi tidak di tangan kiri?", 
                answer: "siku kiri", 
                hint: "Bagian tubuh"
            },
            
            // Level 31-40 (Sulit)
            { 
                question: "Apa yang bisa mengelilingi dunia tetapi tetap berada di sudut?", 
                answer: "perangko", 
                hint: "Digunakan untuk mengirim surat"
            },
            { 
                question: "Apa yang bisa kamu hitung dengan jari tetapi tidak memiliki jari?", 
                answer: "angka", 
                hint: "Simbol matematika"
            },
            { 
                question: "Apa yang bisa membuatmu muda dan tua pada saat yang sama?", 
                answer: "foto", 
                hint: "Gambar dari masa lalu"
            },
            { 
                question: "Apa yang bisa kamu berikan tetapi tidak bisa kamu terima?", 
                answer: "maaf", 
                hint: "Ungkapan penyesalan"
            },
            { 
                question: "Apa yang bisa kamu lihat di malam hari tetapi tidak di siang hari?", 
                answer: "bintang", 
                hint: "Benda langit yang berkelap-kelip"
            },
            { 
                question: "Apa yang bisa kamu masukkan ke dalam kantong kosong untuk membuatnya lebih ringan?", 
                answer: "lubang", 
                hint: "Tidak memiliki berat"
            },
            { 
                question: "Apa yang bisa kamu pegang tanpa menyentuhnya?", 
                answer: "pembicaraan", 
                hint: "Komunikasi verbal"
            },
            { 
                question: "Apa yang bisa kamu temukan di akhir waktu?", 
                answer: "huruf e", 
                hint: "Perhatikan ejaannya"
            },
            { 
                question: "Apa yang bisa kamu pecahkan meski tidak pernah menyentuhnya?", 
                answer: "hati", 
                hint: "Perasaan seseorang"
            },
            { 
                question: "Apa yang bisa kamu berikan kepada seseorang tetapi tidak bisa menyimpannya untuk dirimu sendiri?", 
                answer: "pujian", 
                hint: "Kata-kata positif tentang seseorang"
            },
            
            // Level 41-50 (Sangat Sulit)
            { 
                question: "Apa yang bisa berjalan tanpa kaki, bernapas tanpa paru-paru, dan menangis tanpa mata?", 
                answer: "awan", 
                hint: "Di langit, bisa menghasilkan hujan"
            },
            { 
                question: "Apa yang bisa kamu lihat sekali dalam satu menit, dua kali dalam satu momen, tetapi tidak pernah dalam seribu tahun?", 
                answer: "huruf m", 
                hint: "Perhatikan ejaan kata 'minute', 'moment', dan 'thousand years'"
            },
            { 
                question: "Apa yang bisa kamu pegang di tangan kananmu yang tidak bisa kamu pegang di tangan kirimu?", 
                answer: "tangan kiri", 
                hint: "Bagian tubuhmu sendiri"
            },
            { 
                question: "Apa yang bisa kamu masak tetapi tidak bisa kamu makan?", 
                answer: "buku", 
                hint: "Bisa 'dimasak' dalam arti memalsukan"
            },
            { 
                question: "Apa yang bisa kamu temukan di tengah Paris?", 
                answer: "huruf r", 
                hint: "Perhatikan ejaan kata 'Paris'"
            },
            { 
                question: "Apa yang bisa kamu temukan di awal kekekalan dan di akhir waktu?", 
                answer: "huruf e", 
                hint: "Perhatikan ejaan kata 'eternity' dan 'time'"
            },
            { 
                question: "Apa yang bisa kamu temukan dua kali dalam seminggu, sekali dalam setahun, tetapi tidak pernah dalam sebulan?", 
                answer: "huruf e", 
                hint: "Perhatikan ejaan kata 'week', 'year', dan 'month'"
            },
            { 
                question: "Apa yang bisa kamu bagi dengan orang lain tetapi tetap menjadi milikmu?", 
                answer: "rahasia", 
                hint: "Ketika dibagikan, masih menjadi milikmu"
            },
            { 
                question: "Apa yang bisa kamu lihat dengan mata tertutup dalam gelap?", 
                answer: "mimpi", 
                hint: "Terjadi saat tidur"
            },
            { 
                question: "Apa yang bisa kamu berikan tetapi tidak bisa kamu terima kembali?", 
                answer: "kata-kata", 
                hint: "Setelah diucapkan, tidak bisa ditarik kembali"
            }
        ];

        // Kunci untuk localStorage
        const SAVE_KEY = 'brainChallengeSaveData';

        // Variabel game
        let currentLevel = 0;
        const totalLevels = questions.length;
        const skipAdDuration = 30; // durasi iklan dalam detik

        // Elemen DOM
        const levelElement = document.getElementById('level');
        const questionElement = document.getElementById('question');
        const answerInput = document.getElementById('answer');
        const submitButton = document.getElementById('submit');
        const skipButton = document.getElementById('skip');
        const hintButton = document.getElementById('hint');
        const resetButton = document.getElementById('reset');
        const hintText = document.getElementById('hintText');
        const adContainer = document.getElementById('adContainer');
        const adTimer = document.getElementById('adTimer');
        const celebration = document.getElementById('celebration');
        const playAgainButton = document.getElementById('playAgain');
        const progress = document.getElementById('progress');
        const progressText = document.getElementById('progressText');
        const musicControl = document.getElementById('musicControl');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicIcon = musicControl.querySelector('i');
        const saveIndicator = document.getElementById('saveIndicator');
        const saveNotification = document.getElementById('saveNotification');

        // Status musik
        let isMusicPlaying = true;

        // Fungsi untuk menyimpan progress game
        function saveGame() {
            const saveData = {
                currentLevel: currentLevel,
                timestamp: new Date().getTime()
            };
            
            localStorage.setItem(SAVE_KEY, JSON.stringify(saveData));
            
            // Tampilkan notifikasi penyimpanan
            showSaveNotification();
        }

        // Fungsi untuk memuat progress game
        function loadGame() {
            const savedData = localStorage.getItem(SAVE_KEY);
            
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    currentLevel = data.currentLevel || 0;
                    
                    // Jika sudah menyelesaikan semua level, reset ke awal
                    if (currentLevel >= totalLevels) {
                        currentLevel = 0;
                    }
                    
                    console.log('Game dimuat dari penyimpanan. Level:', currentLevel + 1);
                } catch (e) {
                    console.error('Error memuat data game:', e);
                    currentLevel = 0;
                }
            } else {
                console.log('Tidak ada data game yang tersimpan. Memulai dari level 1.');
                currentLevel = 0;
            }
        }

        // Fungsi untuk menampilkan notifikasi penyimpanan
        function showSaveNotification() {
            saveNotification.classList.add('show');
            
            setTimeout(() => {
                saveNotification.classList.remove('show');
            }, 2000);
        }

        // Fungsi untuk mereset game
        function resetGame() {
            if (confirm('Apakah Anda yakin ingin mereset game? Semua progress akan hilang.')) {
                localStorage.removeItem(SAVE_KEY);
                currentLevel = 0;
                startLevel();
                showSaveNotification();
            }
        }

        // Fungsi untuk mengontrol musik
        function toggleMusic() {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicIcon.className = 'fas fa-volume-mute';
            } else {
                backgroundMusic.play().catch(e => console.log("Autoplay diblokir, klik untuk memulai musik"));
                musicIcon.className = 'fas fa-volume-up';
            }
            isMusicPlaying = !isMusicPlaying;
        }

        // Fungsi untuk memulai level
        function startLevel() {
            levelElement.textContent = currentLevel + 1;
            questionElement.textContent = questions[currentLevel].question;
            answerInput.value = '';
            hintText.style.display = 'none';
            
            // Update progress
            const progressPercent = ((currentLevel + 1) / totalLevels) * 100;
            progress.style.width = `${progressPercent}%`;
            progressText.textContent = `${currentLevel + 1}/${totalLevels}`;
            
            // Simpan progress
            saveGame();
        }

        // Fungsi untuk memeriksa jawaban
        function checkAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            const correctAnswer = questions[currentLevel].answer.toLowerCase();
            
            if (userAnswer === correctAnswer) {
                // Jawaban benar
                if (currentLevel === totalLevels - 1) {
                    // Game selesai
                    showCelebration();
                } else {
                    // Lanjut ke level berikutnya
                    currentLevel++;
                    startLevel();
                }
            } else {
                // Jawaban salah
                alert('Jawaban salah! Coba lagi.');
                answerInput.focus();
            }
        }

        // Fungsi untuk menampilkan iklan skip level
        function showSkipAd() {
            // Pause musik saat iklan
            if (isMusicPlaying) {
                backgroundMusic.pause();
            }
            
            adContainer.style.display = 'flex';
            let timeLeft = skipAdDuration;
            
            const timer = setInterval(() => {
                timeLeft--;
                adTimer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    adContainer.style.display = 'none';
                    
                    // Lanjutkan musik setelah iklan
                    if (isMusicPlaying) {
                        backgroundMusic.play();
                    }
                    
                    skipLevel();
                }
            }, 1000);
        }

        // Fungsi untuk skip level
        function skipLevel() {
            if (currentLevel === totalLevels - 1) {
                // Game selesai
                showCelebration();
            } else {
                // Lanjut ke level berikutnya
                currentLevel++;
                startLevel();
            }
        }

        // Fungsi untuk menampilkan bantuan
        function showHint() {
            hintText.textContent = `Petunjuk: ${questions[currentLevel].hint}`;
            hintText.style.display = 'block';
        }

        // Fungsi untuk menampilkan layar kemenangan
        function showCelebration() {
            celebration.style.display = 'flex';
            playVictorySound();
            createConfetti();
            
            // Hapus data save setelah menyelesaikan game
            localStorage.removeItem(SAVE_KEY);
        }

        // Fungsi untuk memainkan suara kemenangan
        function playVictorySound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const duration = 2;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(261.63, audioContext.currentTime); // C
            oscillator.frequency.setValueAtTime(329.63, audioContext.currentTime + 0.5); // E
            oscillator.frequency.setValueAtTime(392.00, audioContext.currentTime + 1.0); // G
            oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime + 1.5); // C tinggi
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        // Fungsi untuk membuat efek confetti
        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#ffd166', '#6a11cb', '#2575fc'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = `${Math.random() * -20}vh`;
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                document.body.appendChild(confetti);
                
                // Hapus confetti setelah animasi selesai
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Event listeners
        submitButton.addEventListener('click', checkAnswer);
        
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        skipButton.addEventListener('click', showSkipAd);
        hintButton.addEventListener('click', showHint);
        resetButton.addEventListener('click', resetGame);
        playAgainButton.addEventListener('click', () => {
            currentLevel = 0;
            celebration.style.display = 'none';
            startLevel();
        });
        
        musicControl.addEventListener('click', toggleMusic);

        // Event listener untuk menyimpan game saat halaman akan ditutup/direfresh
        window.addEventListener('beforeunload', saveGame);

        // Coba memulai musik otomatis (mungkin diblokir oleh browser)
        backgroundMusic.volume = 0.5;
        backgroundMusic.play().catch(e => {
            console.log("Autoplay diblokir, klik ikon musik untuk memulai");
            musicIcon.className = 'fas fa-volume-mute';
            isMusicPlaying = false;
        });

        // Memuat progress game saat halaman dimuat
        loadGame();

        // Memulai game
        startLevel();
    </script>
</body>
</html>